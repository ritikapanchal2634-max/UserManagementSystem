@using UserManagementSystem.Models.ViewModels
@model RegisterViewModel

@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
}

<div class="auth-form-container mx-auto" style="max-width: 500px; padding: 30px 20px;">
    <div class="auth-header text-center mb-4">
        <h2 class="fw-bold text-primary">Create Account</h2>
        <p class="text-muted mb-0">Join us today! Fill in the details below</p>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle me-2"></i>
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-circle me-2"></i>
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <form asp-action="Register" asp-controller="Account" method="post" enctype="multipart/form-data">
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

        <!-- Full Name & Username -->
        <div class="row g-2 mb-3">
            <div class="col-6">
                <input asp-for="Name" class="form-control" placeholder="Full Name *" />
                <span asp-validation-for="Name" class="text-danger small"></span>
            </div>
            <div class="col-6">
                <input asp-for="UserName" class="form-control" id="UserName" placeholder="Username *" />
                <span asp-validation-for="UserName" class="text-danger small"></span>
            </div>
        </div>

        <!-- Password & Confirm Password -->
        <div class="row g-2 mb-3">
            <div class="col-6">
                <input asp-for="Password" type="password" class="form-control" placeholder="Password *" />
                <span asp-validation-for="Password" class="text-danger small"></span>
            </div>
            <div class="col-6">
                <input asp-for="ConfirmPassword" type="password" class="form-control" placeholder="Confirm Password *" />
                <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>
            </div>
        </div>

        <!-- Date of Birth -->
        <div class="mb-3">
            <input asp-for="DateOfBirth" type="date" class="form-control"
                   placeholder="Date of Birth *"
                   max="@DateTime.Now.ToString("yyyy-MM-dd")" />
            <span asp-validation-for="DateOfBirth" class="text-danger small"></span>
        </div>

        <!-- Gender -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Gender *</label>
            <div class="d-flex gap-3">
                <div class="form-check">
                    <input asp-for="Gender" class="form-check-input" type="radio" id="genderMale" value="Male">
                    <label class="form-check-label" for="genderMale">Male</label>
                </div>
                <div class="form-check">
                    <input asp-for="Gender" class="form-check-input" type="radio" id="genderFemale" value="Female">
                    <label class="form-check-label" for="genderFemale">Female</label>
                </div>
                <div class="form-check">
                    <input asp-for="Gender" class="form-check-input" type="radio" id="genderOther" value="Other">
                    <label class="form-check-label" for="genderOther">Other</label>
                </div>
            </div>
            <span asp-validation-for="Gender" class="text-danger small"></span>
        </div>

        <!-- State, City & Pincode -->
        <div class="row g-2 mb-3">
            <div class="col-4">
                <select asp-for="StateId" class="form-select" id="stateDropdown">
                    <option value="">State *</option>
                    @foreach (var state in ViewBag.States)
                    {
                        <option value="@state.Id">@state.Name</option>
                    }
                </select>
                <span asp-validation-for="StateId" class="text-danger small"></span>
            </div>
            <div class="col-4">
                <select asp-for="CityId" class="form-select" id="cityDropdown" disabled>
                    <option value="">City *</option>
                </select>
                <span asp-validation-for="CityId" class="text-danger small"></span>
            </div>
            <div class="col-4">
                <input asp-for="Pincode" class="form-control" maxlength="6" placeholder="Pincode *" />
                <span asp-validation-for="Pincode" class="text-danger small"></span>
            </div>
        </div>

        <!-- Hobbies -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Hobbies *</label>
            <div class="d-flex flex-wrap gap-2" id="hobbiesContainer">
                <!-- Checkboxes will be populated by JavaScript -->
            </div>
            <span asp-validation-for="Hobbies" class="text-danger small"></span>
        </div>

        <!-- Address -->
        <div class="mb-3">
            <textarea asp-for="Address" class="form-control" rows="2" placeholder="Address"></textarea>
            <span asp-validation-for="Address" class="text-danger small"></span>
        </div>

        <!-- Upload Documents -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Upload Documents</label>
            <input asp-for="Documents" type="file" class="form-control" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" />
            <small class="text-muted d-block mt-1">PDF, DOC, DOCX, JPG, PNG (Max 5MB)</small>
            <span asp-validation-for="Documents" class="text-danger small"></span>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary btn-lg w-100">
            <i class="bi bi-check-circle me-2"></i>Create Account
        </button>
    </form>

    <!-- Login link -->
    <div class="auth-footer mt-3 text-center">
        <p class="mb-0">Already have an account? <a asp-action="Login" asp-controller="Account" class="text-decoration-none fw-semibold">Login here</a></p>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/register.js"></script>
}